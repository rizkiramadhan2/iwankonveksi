<!DOCTYPE html>
<html>
<head>
  <!-- Site made with Mobirise Website Builder v4.4.1, https://mobirise.com -->
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Mobirise v4.4.1, mobirise.com">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
  <meta name="description" content="Site Generator Description">
  <title>Page 1</title>
  <link rel="stylesheet" href="assets/bootstrap-material-design-font/css/material.css">
  <link rel="stylesheet" href="assets/et-line-font-plugin/style.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic&subset=latin">
  <link rel="stylesheet" href="assets/tether/tether.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="assets/dropdown/css/style.css">
  <link rel="stylesheet" href="assets/animate.css/animate.min.css">
  <link rel="stylesheet" href="assets/theme/css/style.css">
  <link rel="stylesheet" href="assets/mobirise-gallery/style.css">
  <link rel="stylesheet" href="assets/mobirise/css/mbr-additional.css" type="text/css">
    <link rel="stylesheet" type="text/css" href="<?php echo base_url().'css/font-awesome.css'?>">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.0/jquery-confirm.min.css">
      <!-- Generic page styles -->
<link rel="stylesheet" href="css/style-file.css">
      <!-- CSS to style the file input field as button and adjust the Bootstrap progress bars -->
<link rel="stylesheet" href="css/jquery.fileupload.css">
  
  
  
</head>
<body>
<section id="ext_menu-5" data-rv-view="162">

    <nav class="navbar navbar-dropdown navbar-fixed-top">
        <div class="container">

            <div class="mbr-table">
                <div class="mbr-table-cell">

                    <div class="navbar-brand">
                        <a href="#" class="navbar-logo"><img src="img/favicon.png" alt="Mobirise"></a>
                        
                    </div>

                </div>
                <div class="mbr-table-cell">

                    <button class="navbar-toggler pull-xs-right hidden-md-up" type="button" data-toggle="collapse" data-target="#exCollapsingNavbar">
                        <div class="hamburger-icon"></div>
                    </button>

                    <ul class="nav-dropdown collapse pull-xs-right nav navbar-nav navbar-toggleable-sm" id="exCollapsingNavbar"><li class="nav-item dropdown"><a class="nav-link link dropdown-toggle" href="#" data-toggle="dropdown-submenu" aria-expanded="false">DESAIN</a><div class="dropdown-menu"><a class="dropdown-item" href="#">Desain Terbaru</a><a class="dropdown-item" href="#"></a><a class="dropdown-item" href="#" aria-expanded="true">Semua Desain</a></div></li><li class="nav-item"><a class="nav-link link" href="#">GALERI</a></li><li class="nav-item"><a class="nav-link link" href="#">PRODUK</a></li><li class="nav-item"><a class="nav-link link" href="#">KONTAK</a></li><li class="nav-item"><a class="nav-link link" href="#">PEMESANAN</a></li><li class="nav-item dropdown"><a class="nav-link link dropdown-toggle" href="#" data-toggle="dropdown-submenu" aria-expanded="false"><?php echo 'Hai '.$_SESSION['login'] ?></a><div class="dropdown-menu"><a class="dropdown-item" href="#">New Item</a><a class="dropdown-item" href="<?php echo base_url('logout') ?>" aria-expanded="false">Logout</a></div></li></ul>
                    <button hidden="" class="navbar-toggler navbar-close" type="button" data-toggle="collapse" data-target="#exCollapsingNavbar">
                        <div class="close-icon"></div>
                    </button>

                </div>
            </div>

        </div>
    </nav>

</section>

<section class="engine"><a href="#">bootstrap buttons</a></section><section class="mbr-gallery mbr-section mbr-section-nopadding mbr-slider-carousel mbr-after-navbar" data-filter="true" id="gallery4-4" data-rv-view="79" style="padding-top: 6rem; padding-bottom: 0rem;">
  <div class="container">
    <!-- The fileinput-button span is used to style the file input field as button -->
    <span class="btn btn-success fileinput-button">
        <i class="glyphicon glyphicon-plus"></i>
        <span>Unggah Desain...</span>
        <!-- The file input field used as target for the file upload widget -->
        <input id="fileupload" type="file" name="files[]" multiple>
    </span>
    <br>
    <br>
    <!-- The global progress bar -->
    <div id="progress" class="progress">
        <div class="progress-bar progress-bar-success"></div>
    </div>
    <!-- The container for the uploaded files -->
    <div id="files" class="files"></div>
  </div>
    <!-- Filter -->
    <hr>
    <div class="mbr-gallery-filter container gallery-filter-active">
    <h4>Daftar Desain</h4>
        <ul>
            <li class="mbr-gallery-filter-all active">All</li>
        </ul>
    </div>

    <!-- Gallery -->
    <div class="mbr-gallery-row">
        <div class="mbr-gallery-layout-default">
            <div>
                <div class="list-desain">
                <div  class="mbr-gallery-item mbr-gallery-item__mobirise3 mbr-gallery-item--p1" data-video-url="false" data-tags="kaos">
                        
                    </div>
                    <div class="mbr-gallery-item mbr-gallery-item__mobirise3 mbr-gallery-item--p1" data-video-url="false" data-tags="kemeja">
                       
                    </div>
                    <div  class="mbr-gallery-item mbr-gallery-item__mobirise3 mbr-gallery-item--p1" data-video-url="false" data-tags="unlabeled">
                       
                    </div>
                </div>
            </div>
            <div class="clearfix"></div>
        </div>
    </div>

    <!-- Lightbox -->
    <div data-app-prevent-settings="" class="mbr-slider modal fade carousel slide" tabindex="-1" data-keyboard="true" data-interval="false" id="lb-gallery4-4">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                   
                    <div class="carousel-inner">
                        
                    </div>
                    

                    <a class="delete close fa fa-trash-o" >
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>
<div></div>

  <script src="assets/web/assets/jquery/jquery.min.js"></script>
  <script src="assets/tether/tether.min.js"></script>
  <script src="assets/bootstrap/js/bootstrap.min.js"></script>
  <script src="assets/smooth-scroll/smooth-scroll.js"></script>
  <script src="assets/dropdown/js/script.min.js"></script>
  <script src="assets/touch-swipe/jquery.touch-swipe.min.js"></script>
  <script src="assets/viewport-checker/jquery.viewportchecker.js"></script>
  <script src="assets/masonry/masonry.pkgd.min.js"></script>
  <script src="assets/imagesloaded/imagesloaded.pkgd.min.js"></script>
  <script src="assets/bootstrap-carousel-swipe/bootstrap-carousel-swipe.js"></script>
  <script src="assets/theme/js/script.js"></script>
  <script src="assets/mobirise-gallery/player.min.js"></script>
  <script src="assets/mobirise-gallery/script.js"></script>

<!-- The jQuery UI widget factory, can be omitted if jQuery UI is already included -->
<script src="js/vendor/jquery.ui.widget.js"></script>
<!-- The Load Image plugin is included for the preview images and image resizing functionality -->
<script src="//blueimp.github.io/JavaScript-Load-Image/js/load-image.all.min.js"></script>
<!-- The Canvas to Blob plugin is included for image resizing functionality -->
<script src="//blueimp.github.io/JavaScript-Canvas-to-Blob/js/canvas-to-blob.min.js"></script>
<!-- The Iframe Transport is required for browsers without support for XHR file uploads -->
<script src="js/jquery.iframe-transport.js"></script>
<!-- The basic File Upload plugin -->
<script src="js/jquery.fileupload.js"></script>
<!-- The File Upload processing plugin -->
<script src="js/jquery.fileupload-process.js"></script>
<!-- The File Upload image preview & resize plugin -->
<script src="js/jquery.fileupload-image.js"></script>
<!-- The File Upload audio preview plugin -->
<script src="js/jquery.fileupload-audio.js"></script>
<!-- The File Upload video preview plugin -->
<script src="js/jquery.fileupload-video.js"></script>
<!-- The File Upload validation plugin -->
<script src="js/jquery.fileupload-validate.js"></script>

<script src="js/desain-file-handler.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.0/jquery-confirm.min.js"></script>
  
  <script type="text/javascript">
    $(document).ready(
    function(){
    $.ajax({
          type: "POST",
          url: "<?php echo base_url('get/api/desain')?>",
          success: function(data) {
        decoded_data =  atob(data);
        console.log(decoded_data);
        $.each(JSON.parse(decoded_data), function(idx, obj) {
          
          var label = obj.label;
          if (obj.label=="") {
            label = "unlabeled"
          }

          $("div.list-desain").prepend('<div class="g'+obj.id_photo+' mbr-gallery-item mbr-gallery-item__mobirise3 mbr-gallery-item--p1" data-video-url="false" data-tags="'+label+'"><div href="#lb-gallery4-4" data-slide-to="'+ idx +'" data-toggle="modal"><img src="'+obj.path+'" alt=""><span class="icon-focus"></span></div></div>'
            );

        
         
          if (idx==0) {
             $("div.carousel-inner").append('<div class="carousel-item active"><img data-id="'+ obj.id_photo +'" src="'+obj.path+'" alt=""></div>'
            );
          }else{
          $("div.carousel-inner").append('<div class="carousel-item"><img data-id="'+ obj.id_photo +'" src="'+obj.path+'" alt=""></div>'
            );
        }
        
        });
          }
        });
      });
    $(document).on('click', "a.delete", function() {
       // console.log($('.active').children().data('id'));
        var i = $('.active').children().data('id');
        var s = $('.active').children().attr('src');
        $.confirm({
    title: 'Confirm!',
    content: 'Ingin menghapus gambar?',
    buttons: {
        confirm: function () {
            
            deletePict(i,s);
           
            // $('.modal').hide();
            // $('.modal-backdrop').hide();
            $.alert('Gambar terhapus');
        },
        cancel: function () {
            $.alert('Dibatalkan');
        }
    }
});
      });
    function deletePict(id,sr){
      $.ajax({
      url: "<?php echo base_url('delete/desain') ?>",
      type: "POST",
      data:'id='+id+'&path='+sr,
      success: function(data){
          $('.g'+id).remove();
               $('.modal').modal('toggle');
               var x = $("div.list-desain").html();
               $("div.list-desain").html("");
               $("div.list-desain").html(x);
      }        
     }); 
    }
    
  </script>


  <input name="animation" type="hidden">
  </body>
</html>